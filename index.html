<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>鄭丁培芳的歌</title>

<!-- 社群預覽 -->
<meta property="og:type" content="website" />
<meta property="og:title" content="鄭丁培芳的歌" />
<meta property="og:description" content="12 首懷念的歌曲｜手機可播放、切歌、停止" />
<meta property="og:url" content="https://jjjhon-eng.github.io/Ting-s-Song/" />
<meta property="og:image" content="https://jjjhon-eng.github.io/Ting-s-Song/IMG_9452.JPG" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="鄭丁培芳的歌" />
<meta name="twitter:description" content="12 首懷念的歌曲｜手機可播放、切歌、停止" />
<meta name="twitter:image" content="https://jjjhon-eng.github.io/Ting-s-Song/IMG_9452.JPG" />

<style>
  :root{
    --violet:#7a1fa2;
    --panel-bg:rgba(255,255,255,.78);
    --btn:#7a1fa2;
    --btn-hover:#9c27b0;
  }
  html,body{margin:0;padding:0}
  body{
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang TC",
                 "Noto Sans TC", "Microsoft JhengHei", Arial, sans-serif;
    color:#222; text-align:center;
    background:url('IMG_9452.JPG') center/cover fixed no-repeat;
  }
  h1{
    margin:28px 12px 18px;
    font-weight:800; letter-spacing:.08em;
    color:var(--violet); text-shadow:0 2px 10px rgba(123,30,122,.15);
    font-size: clamp(22px,4.8vw,42px);
  }
  .panel{
    display:inline-block; text-align:left;
    background:var(--panel-bg); border-radius:18px;
    padding:16px 18px 20px; margin:10px auto 28px;
    box-shadow:0 10px 24px rgba(0,0,0,.18);
    backdrop-filter: blur(6px);
    width:min(680px,90vw);
  }
  audio{ width:100%; height:40px; }
  .controls{ display:flex; gap:14px; justify-content:center; margin:14px 0 6px; }
  .controls button{
    background:var(--btn); color:#fff; border:0; border-radius:12px;
    padding:10px 22px; font-size:18px; cursor:pointer;
  }
  .controls button:hover{ background:var(--btn-hover); }
  ul{ list-style:none; padding:10px 10px 6px; margin:0; }
  li{ padding:10px 8px; border-radius:8px; cursor:pointer; }
  li:hover{ background:rgba(122,31,162,.08); }
  li.active{ color:#d22; font-weight:700; }
  .err{ color:#d22; font-weight:700; padding:6px 4px 0; text-align:center; }
</style>
</head>
<body>
  <h1>鄭丁培芳的歌</h1>

  <div class="panel">
    <audio id="player" preload="metadata" controls></audio>

    <div class="controls">
      <button id="prevBtn">上一首</button>
      <button id="stopBtn">Stop</button>
      <button id="nextBtn">下一首</button>
    </div>

    <div id="msg" class="err" aria-live="polite"></div>

    <ul id="list"></ul>
  </div>

<script>
  // 顯示歌名（title）與實際檔名（file）分離：檔名沿用你的硬碟名稱
  const tracks = [
    { title:"王昭君",               file:"01 曲目 1.mp3"  },
    { title:"心雨",                 file:"02 曲目 2.mp3"  },
    { title:"第二春",               file:"03 曲目 3.mp3"  },
    { title:"藍色的夢",             file:"04 曲目 4.mp3"  },
    { title:"九九女兒紅",           file:"05 曲目 5.mp3"  },
    { title:"想當初見到你",         file:"06 曲目 6.mp3"  },
    { title:"冬戀",                 file:"07 曲目 7.mp3"  },
    { title:"你是春日風",           file:"08 曲目 8.mp3"  },
    { title:"給我一個吻",           file:"09 曲目 9.mp3"  },
    { title:"真的好想你",           file:"10 曲目 10.mp3" },
    { title:"初戀女",               file:"11 曲目 11.mp3" },
    { title:"白天不懂夜的黑（林葆誠 男）", file:"12 曲目 12.mp3" }
  ];

  const player = document.getElementById('player');
  const listEl = document.getElementById('list');
  const msgEl  = document.getElementById('msg');
  let i = 0;

  // 產生清單
  tracks.forEach((t, idx)=>{
    const li = document.createElement('li');
    li.textContent = ${String(idx+1).padStart(2,'0')}  ${t.title};
    li.onclick = ()=> loadAndPlay(idx, true);
    listEl.appendChild(li);
  });

  function highlight(idx){
    [...listEl.children].forEach((li,k)=> li.classList.toggle('active', k===idx));
  }

  function loadAndPlay(idx, userGesture=false){
    i = idx;
    msgEl.textContent = "";
    const src = encodeURI(tracks[i].file); // 重要：編碼中文/空白
    player.src = src;
    player.load();

    // 若來源失敗，顯示錯誤訊息
    player.onerror = ()=>{
      msgEl.textContent = Error：找不到檔案「${tracks[i].file}」;
    };

    // iOS/Android 需使用者動作才允許播放
    if (userGesture) player.play().catch(()=>{});
    highlight(i);
  }

  // 按鈕
  document.getElementById('prevBtn').onclick = ()=> loadAndPlay((i-1+tracks.length)%tracks.length, true);
  document.getElementById('nextBtn').onclick = ()=> loadAndPlay((i+1)%tracks.length, true);
  document.getElementById('stopBtn').onclick = ()=>{
    player.pause(); player.currentTime = 0;
  };

  // 初始化：只載入不自動播，避免手機封鎖
  loadAndPlay(0, false);
</script>
</body>
</html>